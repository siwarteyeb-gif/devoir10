<div class="container mt-5">
  <div>
    <h2>Modifier un Parfum :</h2>
  </div>

  <form #parfumForm="ngForm">
    <!-- ======= Id ======= -->
    <div class="col-sm-2 col-md-2 col-lg-2 mb-3">
      <label>Id</label>
      <input
        readonly
        type="text"
        [(ngModel)]="currentParfum.idParfum"
        name="idParfum"
        class="form-control"
        required
      />
    </div>

    <!-- ======= Marque Parfum ======= -->
    <div class="col-sm-2 col-md-2 col-lg-2 mb-3">
      <label>Marque Parfum</label>
      <input
        type="text"
        [(ngModel)]="currentParfum.marqueParfum"
        name="marqueParfum"
        class="form-control"
        required
        minlength="5"
      />
      @if (parfumForm.controls['marqueParfum']?.errors && parfumForm.controls['marqueParfum']?.touched) {
        @if (parfumForm.controls['marqueParfum']?.errors?.['required']) {
          <small class="text-danger">⚠️ Ce champ est obligatoire</small>
        }
        @if (parfumForm.controls['marqueParfum']?.errors?.['minlength']) {
          <small class="text-danger">⚠️ La marque doit contenir au moins 5 caractères</small>
        }
      }
    </div>

    <!-- ======= Nom Parfum ======= -->
    <div class="col-sm-4 col-md-4 col-lg-4 mb-3">
      <label>Nom Parfum</label>
      <input
        type="text"
        [(ngModel)]="currentParfum.nomParfum"
        name="nomParfum"
        class="form-control"
        required
        minlength="5"
      />
      @if (parfumForm.controls['nomParfum']?.errors && parfumForm.controls['nomParfum']?.touched) {
        @if (parfumForm.controls['nomParfum']?.errors?.['required']) {
          <small class="text-danger">⚠️ Ce champ est obligatoire</small>
        }
        @if (parfumForm.controls['nomParfum']?.errors?.['minlength']) {
          <small class="text-danger">⚠️ Le nom doit contenir au moins 5 caractères</small>
        }
      }
    </div>

    <!-- ======= Prix Parfum ======= -->
    <div class="col-sm-2 col-md-2 col-lg-2 mb-3">
      <label>Prix Parfum</label>
      <input
        type="number"
        [(ngModel)]="currentParfum.prixParfum"
        name="prixParfum"
        class="form-control"
        required
      />
      @if (parfumForm.controls['prixParfum']?.invalid && parfumForm.controls['prixParfum']?.touched) {
        <small class="text-danger">⚠️ Ce champ est obligatoire</small>
      }
    </div>

    <!-- ======= Contenance ======= -->
    <div class="col-sm-4 col-md-4 col-lg-4 mb-3">
      <label>Contenance</label>
      <input
        type="text"
        [(ngModel)]="currentParfum.contenanceParfum"
        name="contenanceParfum"
        class="form-control"
        required
      />
      @if (parfumForm.controls['contenanceParfum']?.invalid && parfumForm.controls['contenanceParfum']?.touched) {
        <small class="text-danger">⚠️ Ce champ est obligatoire</small>
      }
    </div>

    <!-- ======= Email ======= -->
    <div class="col-sm-4 col-md-4 col-lg-4 mb-3">
      <label>Email</label>
      <input
        type="email"
        [(ngModel)]="currentParfum.email"
        name="email"
        class="form-control"
        required
        email
      />
      @if (parfumForm.controls['email']?.hasError('required') && parfumForm.controls['email']?.touched) {
        <small class="text-danger">⚠️ L'email est obligatoire</small>
      }
      @if (parfumForm.controls['email']?.hasError('email') && parfumForm.controls['email']?.touched) {
        <small class="text-danger">⚠️ Format d'email invalide (ex: exemple@gmail.com)</small>
      }
    </div>

    <!-- ======= Genre ======= -->
    <div class="col-sm-4 col-md-4 col-lg-4 mb-3">
      <label>Genre</label>
      <select
        class="form-control form-control-lg"
        id="idGen"
        name="idGen"
        [(ngModel)]="updatedGenId"
        required
      >
        <option value="">-- Sélectionnez un genre --</option>
        @for (gen of genres; track gen.idGen) {
          <option [value]="gen.idGen">{{ gen.nomGen }}</option>
        }
      </select>
      @if (parfumForm.controls['idGen']?.invalid && parfumForm.controls['idGen']?.touched) {
        <small class="text-danger">⚠️ Ce champ est obligatoire</small>
      }
    </div>

    <!-- ======= Bouton ======= -->
    <div class="mt-3">
      <button
        type="button"
        class="btn btn-success"
        (click)="updateParfum()"
        [disabled]="parfumForm.invalid"
      >
        Modifier
      </button>
    </div>
  </form>
</div>
